<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-12-07">
<meta name="description" content="DS 220">

<title>Matt Viana</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Markdown_files/libs/clipboard/clipboard.min.js"></script>
<script src="Markdown_files/libs/quarto-html/quarto.js"></script>
<script src="Markdown_files/libs/quarto-html/popper.min.js"></script>
<script src="Markdown_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Markdown_files/libs/quarto-html/anchor.min.js"></script>
<link href="Markdown_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Markdown_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Markdown_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Markdown_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Markdown_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Matt Viana</h1>
</div>

<div>
  <div class="description">
    DS 220
  </div>
</div>


<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 7, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="correlation-of-wages-in-different-education-levels-and-consumer-price-index-from-2000-to-2022" class="level1">
<h1>Correlation of wages in different education levels and Consumer Price Index from 2000 to 2022</h1>
<p>It has been in the public eye that the cost of living has dramatically increased in the last 20 years. For the purpose of enriching my data analytical skills and knowledge of relevant issues for a student about to enter the workforce, I decided to track two metrics of cost of living. The analysis of trends in wages distributed by differences in levels of education, in addition to the inflation rates since the year 2000 provides an important base case representative of the value of money for working Americans. This analysis holds significant importance due to its direct impact on standards of living, income distribution, and overall economic health. The motivation behind this study stems from the need to comprehend the evolving relationship between education, wages, and inflation, which serves as a pivotal aspect in shaping socioeconomic policies and guiding investments.</p>
<p>The focus of this analytical project is on two datasets. US Inflation Dataset (1947 - 2023) where we will be surveying Consumer Price Index (CPI) variations, and Hourly Wages by Education in the USA (1973-2022) from 2000 - 2022. By correlating a significant and relevant span year over year, it enables the creation of data models that display economic trends. Using these models, we aim to answer the following questions:</p>
<p>How much have wages increased in the measured timeframe?</p>
<p>Have wages changed consistently across the different levels of education?</p>
<p>How much has the CPI risen in the measured timeframe?</p>
<p>Has there been a consistent relationship between the CPI and wage growth over the past two decades?</p>
<p>What is the difference in purchasing power in 2000 to 2022 based on education levels?</p>
<p>Which levels of education have shown the strongest correlation between wage changes and CPI variations since 2000?</p>
<p>What are relevant trends displayed?</p>
<p>The correlation between education and wages has long been established, yet the intricate nuances within this relationship, especially in the context of fluctuating economic conditions represented by inflation, remain a personal curiosity of mine. This exploration delves into the changes in wage differentials across various education levels over the past two decades, considering the overarching influence of inflationary pressures on these earning differentials.</p>
<section id="recognizing-the-criteria" class="level2">
<h2 class="anchored" data-anchor-id="recognizing-the-criteria">Recognizing the Criteria</h2>
<p>Key concepts to be explored include the influence of education levels on wage disparities, tracking individuals under these categories: Less than a High School diploma, High School, College Degree, Bachelors Degree, and Advanced Degree.</p>
<p>CPI is calculated based on a predetermined basket of goods and services commonly purchased by urban consumers. This basket represents various categories like housing, food, transportation, education, healthcare, and entertainment. For the analyzed data set the information was measured by the Federal Reserve Economic Data (FRED), Federal Reserve Bank of St.&nbsp;Louis. For this paper, the base CPI used to track percentages is 2000-01-01, with a calculated CPI of 169.3. This means a CPI of 200 represents approximately an 18.13% increase from the base.</p>
<p>Leveraging the capabilities of Python’s Pandas library as a statistical tool has provided a robust framework for data manipulation, analysis, and visualization. This comprehensive approach explores the interactions between Consumer Price Index variations and wage trends across different educational backgrounds. By delineating these criteria, we’ve established a foundational understanding of the questions at hand.</p>
<p>Surveying the data an obvious starting point when pursuing this analysis was determining the most basic metrics provided by the data. Looking at the wage data, mapping the change in income over time for each category shows the increase over the years and the difference between categories.</p>
<div class="cell" data-execution_count="2">
<div class="cell-output cell-output-display">
<p><img src="Markdown_files/figure-html/cell-3-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="3">
<div class="cell-output cell-output-stdout">
<pre><code>                                 less_than_hs high_school some_college  \
Min                                     14.62       20.31        22.48   
Max                                     17.02        22.7        25.44   
Average Change Over Year                 0.08        0.05         0.05   
Average Percent Change Over Year        0.58%       0.26%        0.23%   
Total Percent Increase                 16.42%      11.77%       13.17%   

                                 bachelors_degree advanced_degree  
Min                                         36.44           45.99  
Max                                         41.65           53.74  
Average Change Over Year                     0.23            0.33  
Average Percent Change Over Year            0.64%           0.71%  
Total Percent Increase                      14.3%          16.85%  </code></pre>
</div>
</div>
<p>It is immediately visible that the wage increases are stagnant, and that the differences between individuals with less than a high school diploma, individuals with a high school diploma, and those who have completed a college diploma are not significant. Whereas, those who completed a bachelor see a significant pay increase, which stands equally as true for those who have some advanced degree. Even so, the total percent increase per category is close to consistent across the board. One noticeable difference is that there is less of a variation between those with no High School diploma and those with a High School diploma in 2022.</p>
<p>The second basic metric was to graph the changes in CPI per year. Graphing this data allows us to better visualize the changes that a person working and living through those years would experience. The day-to-day, or even, year-to-year changes are small; however, when mapping on a large scale a pattern of small changes becomes a significant outline.</p>
<div class="cell" data-execution_count="4">
<div class="cell-output cell-output-display">
<p><img src="Markdown_files/figure-html/cell-5-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="cell-output cell-output-stdout">
<pre><code>                                 Values
Min                               170.0
Max                               298.6
Average Change Over Year           5.65
Average Percent Change Over Year  3.33%
Total Percent Increase              76%</code></pre>
</div>
</div>
<p>After creating the data frames and table, it is easily visible that the Consumer Price Index changes at an average of 3.33% a year, for a total of 76%. A staggering increase compared to the average wage increase year over year. The inability of wages to keep up with inflation can lead to a decrease in the standard of living for affected individuals or households. They may have to allocate more of their income towards essentials like housing, food, and healthcare, leaving less for savings or discretionary spending.</p>
<p>This scenario can lead to financial stress, especially for those on fixed incomes or with limited opportunities for wage increases. It might force individuals to cut back on non-essential expenses or seek additional sources of income to maintain their previous standard of living. A frightening outlook on the future. What is obvious when looking at both of these data visualizations is that they have little variation year over year, leading me to predict that this pattern will likely remain constant.</p>
<p>On the question of whether or not there has been a consistent relationship between the CPI and wage growth over the past two decades, I decided to plot the percentage increase yearly for all of the tracked metrics in this paper. The following graph represents the data visible in the tables. It enables the visualization of how daunting the differences have been.</p>
<div class="cell" data-tags="[&quot;hide_code&quot;]" data-execution_count="6">
<div class="cell-output cell-output-display">
<p><img src="Markdown_files/figure-html/cell-7-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Next, I inquired about the difference in purchasing power in 2000 to 2022 based on education levels. My method was dividing income by CPI. To do so I first multiplied every income by 2000 hours, an estimation of full-time pay based on the following assumptions: Weekly Hours × Weeks Worked per Year=Annual Hours Worked. 40 hours/week × 50 weeks/year = 2000 hours/year.</p>
<div class="cell" data-execution_count="7">
<div class="cell-output cell-output-display">
<p><img src="Markdown_files/figure-html/cell-8-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="8">
<div class="cell-output cell-output-stdout">
<pre><code>                                 less_than_hs high_school some_college  \
Min                                    103.82      147.21       167.59   
Max                                    194.35      258.12       291.88   
Average Change Over Year                 4.12        5.04         5.65   
Average Percent Change Over Year        3.96%       3.42%        3.37%   
Total Percent Change                    87.2%      75.35%       74.17%   

                                 bachelors_degree advanced_degree  
Min                                        257.89          325.48  
Max                                        489.41          626.12  
Average Change Over Year                    10.52           13.67  
Average Percent Change Over Year            4.08%            4.2%  
Total Percent Change                       89.77%          92.37%  </code></pre>
</div>
</div>
<p>As we can see from the table, the average divergence at the end of the twenty-two-year period was 83.77%. This means an average individual’s purchasing power would translate to every 100 dollars earned today being worth 183.77 dollars in the year 2000.</p>
<p>To answer my question “Which levels of education have shown the strongest correlation between wage changes and CPI variations since 2000?” it seems to be that having a college none-bachelors degree is the smallest difference in purchasing power. With that said, no education level had any meaningful correlation to CPI.</p>
<p>The trends analyzed today are consistent. Wages have on average increased by around 4 dollars an hour, while the Consumer Price Index has changed by 128 points approximately.</p>
</section>
<section id="final-thoughts" class="level2">
<h2 class="anchored" data-anchor-id="final-thoughts">Final Thoughts</h2>
<p>Throughout this analysis, we delved into the intricate dynamics between CPI variations and wage fluctuations across different educational strata from 2000 to 2022. Utilizing statistical analysis, primarily employing Python’s Pandas library, we uncovered compelling insights into the impact of inflation on purchasing power and income disparities.</p>
<p>Our findings highlighted a discernible disparity in the adjustment of wages across educational levels in response to CPI changes. It became evident that while certain sectors or educational groups showcased minor resilience to CPI fluctuations, they all experienced disproportionate impacts on real wages.</p>
<p>The data underscored the crucial role education plays in buffering individuals by providing higher wages; despite not being indicative of correlation to CPI. However, disparities persisted, revealing the need for targeted interventions to mitigate income inequalities stemming from CPI variations.</p>
<p>Our analysis elucidated the nuanced interplay between CPI, wage adjustments, and their implications for economic policies and societal well-being. The inability of wages to consistently keep pace with CPI growth underscored the challenges individuals face in maintaining purchasing power and sustaining their standard of living.</p>
<p>Moving forward, these findings prompt a reconsideration of policy frameworks aimed at addressing wage stagnation, bolstering educational opportunities, and ensuring a more equitable distribution of income. Furthermore, this analysis puts into evidence the need for further research into the multifaceted relationship between inflation, education, and income dynamics, paving the way for more informed economic strategies and social policies.</p>
</section>
<section id="works-cited" class="level2">
<h2 class="anchored" data-anchor-id="works-cited">Works Cited</h2>
<p>Asaniczka. “Wages by Education in the USA (1973-2022).” Kaggle, 5 Dec.&nbsp;2023, www.kaggle.com/datasets/asaniczka/wages-by-education-in-the-usa-1973-2022.</p>
<p>Narne, Pavan. “US Inflation Dataset (1947 - 2023).” Kaggle, 30 July 2023, www.kaggle.com/datasets/pavankrishnanarne/us-inflation-dataset-1947-present.</p>
</section>
<section id="code-apendix" class="level2">
<h2 class="anchored" data-anchor-id="code-apendix">Code Apendix</h2>
<div class="cell" data-tags="[&quot;show-code&quot;,&quot;hide-output&quot;]" data-execution_count="9">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Reading and Cleaning the data</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>CPI <span class="op">=</span> pd.read_csv(<span class="st">"US_inflation_rates.csv"</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>wages <span class="op">=</span> pd.read_csv(<span class="st">"wages_by_education.csv"</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">#Clean Data</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>CPI <span class="op">=</span> CPI.dropna()</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>wages <span class="op">=</span> wages[::<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>wages <span class="op">=</span> wages.dropna()</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>wages <span class="op">=</span> wages.drop_duplicates()</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>CPI <span class="op">=</span> CPI[CPI[<span class="st">'value'</span>] <span class="op">&gt;</span> <span class="fl">169.3</span>]</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>CPI <span class="op">=</span> CPI[CPI[<span class="st">'value'</span>] <span class="op">&lt;</span> <span class="fl">298.99</span>]</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>CPI[<span class="st">'date'</span>] <span class="op">=</span> pd.to_datetime(CPI[<span class="st">'date'</span>])</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>wages <span class="op">=</span> wages[wages[<span class="st">'year'</span>] <span class="op">&gt;</span> <span class="dv">1999</span>]</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>wages <span class="op">=</span> wages.iloc[:, :<span class="dv">6</span>]</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>wage_years <span class="op">=</span> wages[<span class="st">'year'</span>]</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>wages_noYear <span class="op">=</span> wages.drop(columns<span class="op">=</span><span class="st">'year'</span>) </span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting line graph 1</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> column <span class="kw">in</span> wages.columns:</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    plt.plot(wage_years, wages[column], label<span class="op">=</span>column)</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Wages'</span>)</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Wages over the Years (2000 - 2022)'</span>)</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>plt.xlim(<span class="dv">2000</span>, <span class="dv">2022</span>)  </span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">100</span>)</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>plt.xticks(<span class="bu">range</span>(<span class="dv">2000</span>, <span class="dv">2022</span>, <span class="dv">2</span>))</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a><span class="co">#plt.show()</span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Making Table</span></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>statistics_per_column <span class="op">=</span> {}</span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> column <span class="kw">in</span> wages_noYear.columns:</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>    min_value <span class="op">=</span> wages_noYear[column].<span class="bu">min</span>()</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>    max_value <span class="op">=</span> wages_noYear[column].<span class="bu">max</span>()</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>    yearly_change <span class="op">=</span> wages_noYear[column].diff().mean()</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>    wage_total_percent_increase <span class="op">=</span> ((max_value <span class="op">-</span> min_value) <span class="op">/</span> min_value) <span class="op">*</span> <span class="dv">100</span> <span class="cf">if</span> min_value <span class="op">!=</span> <span class="dv">0</span> <span class="cf">else</span> <span class="dv">0</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>    yearly_change_percent <span class="op">=</span> ((yearly_change<span class="op">/</span>min_value) <span class="op">*</span> <span class="dv">100</span>)</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>    statistics_per_column[column] <span class="op">=</span> {</span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Min'</span>: <span class="bu">round</span>(min_value, <span class="dv">2</span>),</span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Max'</span>: <span class="bu">round</span>(max_value, <span class="dv">2</span>),</span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Average Change Over Year'</span>: <span class="bu">round</span>(yearly_change, <span class="dv">2</span>),</span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Average Percent Change Over Year'</span>:<span class="ss">f"</span><span class="sc">{</span><span class="bu">round</span>(yearly_change_percent, <span class="dv">2</span>)<span class="sc">}</span><span class="ss">%"</span>,</span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Total Percent Increase'</span>: <span class="ss">f"</span><span class="sc">{</span><span class="bu">round</span>(wage_total_percent_increase, <span class="dv">2</span>)<span class="sc">}</span><span class="ss">%"</span></span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>statistics_df <span class="op">=</span> pd.DataFrame.from_dict(statistics_per_column, orient<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(statistics_df)</span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting line graph 2 </span></span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>CPI[<span class="st">'date'</span>] <span class="op">=</span> pd.to_datetime(CPI[<span class="st">'date'</span>])</span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>plt.plot(CPI[<span class="st">'date'</span>], CPI[<span class="st">'value'</span>], marker<span class="op">=</span><span class="st">'o'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>)</span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Date'</span>)</span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'CPI Value'</span>)</span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Changes in CPI over Time (January 2000 - December 2022)'</span>)</span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)  <span class="co"># Rotate x axis</span></span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a>plt.xlim(pd.Timestamp(<span class="st">'2000-01-01'</span>), pd.Timestamp(<span class="st">'2022-12-31'</span>))</span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">400</span>)</span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a><span class="co">#plt.show()</span></span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate statistics</span></span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>CPI[<span class="st">'yearly_change'</span>] <span class="op">=</span> CPI[<span class="st">'value'</span>].diff() </span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a>average_change <span class="op">=</span> CPI[<span class="st">'yearly_change'</span>].mean() </span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>average_change <span class="op">=</span> average_change <span class="op">*</span> <span class="dv">12</span></span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a>min_value <span class="op">=</span> CPI[<span class="st">'value'</span>].<span class="bu">min</span>()</span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a>max_value <span class="op">=</span> CPI[<span class="st">'value'</span>].<span class="bu">max</span>()</span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a>total_change_percent <span class="op">=</span> ((max_value <span class="op">-</span> min_value) <span class="op">/</span> min_value) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb4-86"><a href="#cb4-86" aria-hidden="true" tabindex="-1"></a>CPI_yearly_change_percent <span class="op">=</span> ((average_change<span class="op">/</span>min_value) <span class="op">*</span> <span class="dv">100</span>)</span>
<span id="cb4-87"><a href="#cb4-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-88"><a href="#cb4-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-89"><a href="#cb4-89" aria-hidden="true" tabindex="-1"></a>statistics_table2 <span class="op">=</span> {</span>
<span id="cb4-90"><a href="#cb4-90" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Min'</span>: <span class="bu">round</span>(CPI[<span class="st">'value'</span>].<span class="bu">min</span>(), <span class="dv">2</span>),</span>
<span id="cb4-91"><a href="#cb4-91" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Max'</span>: <span class="bu">round</span>(CPI[<span class="st">'value'</span>].<span class="bu">max</span>(), <span class="dv">2</span>),</span>
<span id="cb4-92"><a href="#cb4-92" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Average Change Over Year'</span>: <span class="bu">round</span>(average_change, <span class="dv">2</span>),</span>
<span id="cb4-93"><a href="#cb4-93" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Average Percent Change Over Year'</span>:<span class="ss">f"</span><span class="sc">{</span><span class="bu">round</span>(CPI_yearly_change_percent, <span class="dv">2</span>)<span class="sc">}</span><span class="ss">%"</span>,</span>
<span id="cb4-94"><a href="#cb4-94" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Total Percent Increase"</span> : <span class="ss">f"</span><span class="sc">{</span><span class="bu">round</span>(total_change_percent)<span class="sc">}</span><span class="ss">%"</span></span>
<span id="cb4-95"><a href="#cb4-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-96"><a href="#cb4-96" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-97"><a href="#cb4-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-98"><a href="#cb4-98" aria-hidden="true" tabindex="-1"></a><span class="co"># Table</span></span>
<span id="cb4-99"><a href="#cb4-99" aria-hidden="true" tabindex="-1"></a>table2 <span class="op">=</span> pd.DataFrame.from_dict(statistics_table2, orient<span class="op">=</span><span class="st">'index'</span>, columns<span class="op">=</span>[<span class="st">'Values'</span>])</span>
<span id="cb4-100"><a href="#cb4-100" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(table2)</span>
<span id="cb4-101"><a href="#cb4-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-102"><a href="#cb4-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-103"><a href="#cb4-103" aria-hidden="true" tabindex="-1"></a><span class="co"># Merging data</span></span>
<span id="cb4-104"><a href="#cb4-104" aria-hidden="true" tabindex="-1"></a>CPI[<span class="st">'date'</span>] <span class="op">=</span> pd.to_datetime(CPI[<span class="st">'date'</span>])</span>
<span id="cb4-105"><a href="#cb4-105" aria-hidden="true" tabindex="-1"></a>CPI_yearly <span class="op">=</span> CPI.groupby(CPI[<span class="st">'date'</span>].dt.year).first()</span>
<span id="cb4-106"><a href="#cb4-106" aria-hidden="true" tabindex="-1"></a>CPI_yearly.index.name <span class="op">=</span> <span class="st">'year'</span></span>
<span id="cb4-107"><a href="#cb4-107" aria-hidden="true" tabindex="-1"></a>CPI_yearly.reset_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb4-108"><a href="#cb4-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-109"><a href="#cb4-109" aria-hidden="true" tabindex="-1"></a>CPI_values <span class="op">=</span> CPI_yearly[<span class="st">'value'</span>]</span>
<span id="cb4-110"><a href="#cb4-110" aria-hidden="true" tabindex="-1"></a>wages_with_CPI <span class="op">=</span> wages.join(CPI_values, how<span class="op">=</span><span class="st">'inner'</span>)</span>
<span id="cb4-111"><a href="#cb4-111" aria-hidden="true" tabindex="-1"></a>wages_with_CPI[<span class="st">'value'</span>] <span class="op">=</span> wages_with_CPI[<span class="st">'value'</span>].iloc[::<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb4-112"><a href="#cb4-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-113"><a href="#cb4-113" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the percentage diff</span></span>
<span id="cb4-114"><a href="#cb4-114" aria-hidden="true" tabindex="-1"></a>wages_with_CPI[<span class="st">'value'</span>] <span class="op">=</span> wages_with_CPI[<span class="st">'value'</span>].values[::<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb4-115"><a href="#cb4-115" aria-hidden="true" tabindex="-1"></a>wages_with_CPI <span class="op">=</span> wages_with_CPI.rename(columns<span class="op">=</span>{<span class="st">'value'</span>: <span class="st">'CPI'</span>})</span>
<span id="cb4-116"><a href="#cb4-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-117"><a href="#cb4-117" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the percentage diff</span></span>
<span id="cb4-118"><a href="#cb4-118" aria-hidden="true" tabindex="-1"></a>percentage_diff <span class="op">=</span> wages_with_CPI.drop(<span class="st">'year'</span>, axis<span class="op">=</span><span class="dv">1</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: ((x <span class="op">-</span> x.<span class="bu">min</span>()) <span class="op">/</span> x.<span class="bu">min</span>()) <span class="op">*</span> <span class="dv">100</span>)</span>
<span id="cb4-119"><a href="#cb4-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-120"><a href="#cb4-120" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb4-121"><a href="#cb4-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-122"><a href="#cb4-122" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the percentage difference for each column</span></span>
<span id="cb4-123"><a href="#cb4-123" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> column <span class="kw">in</span> percentage_diff.columns:</span>
<span id="cb4-124"><a href="#cb4-124" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> column <span class="op">!=</span> <span class="st">'year'</span>:  </span>
<span id="cb4-125"><a href="#cb4-125" aria-hidden="true" tabindex="-1"></a>        plt.plot(wages_with_CPI[<span class="st">'year'</span>], percentage_diff[column], label<span class="op">=</span>column)</span>
<span id="cb4-126"><a href="#cb4-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-127"><a href="#cb4-127" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb4-128"><a href="#cb4-128" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'% Difference from Minimum'</span>)</span>
<span id="cb4-129"><a href="#cb4-129" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Percentage Difference from Minimum Value by Year'</span>)</span>
<span id="cb4-130"><a href="#cb4-130" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">100</span>)</span>
<span id="cb4-131"><a href="#cb4-131" aria-hidden="true" tabindex="-1"></a>plt.xlim(<span class="dv">2000</span>, <span class="dv">2022</span>)</span>
<span id="cb4-132"><a href="#cb4-132" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb4-133"><a href="#cb4-133" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb4-134"><a href="#cb4-134" aria-hidden="true" tabindex="-1"></a><span class="co">#plt.show()</span></span>
<span id="cb4-135"><a href="#cb4-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-136"><a href="#cb4-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-137"><a href="#cb4-137" aria-hidden="true" tabindex="-1"></a>columns_to_multiply <span class="op">=</span> [<span class="st">'less_than_hs'</span>, <span class="st">'high_school'</span>, <span class="st">'some_college'</span>, <span class="st">'bachelors_degree'</span>, <span class="st">'advanced_degree'</span>]</span>
<span id="cb4-138"><a href="#cb4-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-139"><a href="#cb4-139" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiplying selected columns by 2000</span></span>
<span id="cb4-140"><a href="#cb4-140" aria-hidden="true" tabindex="-1"></a>wages_with_CPI[columns_to_multiply] <span class="op">*=</span> <span class="dv">2000</span></span>
<span id="cb4-141"><a href="#cb4-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-142"><a href="#cb4-142" aria-hidden="true" tabindex="-1"></a>wagesYear <span class="op">=</span> wages_with_CPI.join(CPI_values, how<span class="op">=</span><span class="st">'inner'</span>)</span>
<span id="cb4-143"><a href="#cb4-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-144"><a href="#cb4-144" aria-hidden="true" tabindex="-1"></a><span class="co"># Dividing wage columns by 'CPI'</span></span>
<span id="cb4-145"><a href="#cb4-145" aria-hidden="true" tabindex="-1"></a>wagesYear_normalized <span class="op">=</span> wagesYear[columns_to_multiply].div(wagesYear[<span class="st">'value'</span>], axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb4-146"><a href="#cb4-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-147"><a href="#cb4-147" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb4-148"><a href="#cb4-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-149"><a href="#cb4-149" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> column <span class="kw">in</span> wagesYear_normalized.columns:</span>
<span id="cb4-150"><a href="#cb4-150" aria-hidden="true" tabindex="-1"></a>    plt.plot(wagesYear.index, wagesYear_normalized[column], label<span class="op">=</span>column)</span>
<span id="cb4-151"><a href="#cb4-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-152"><a href="#cb4-152" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb4-153"><a href="#cb4-153" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Normalized Values'</span>)</span>
<span id="cb4-154"><a href="#cb4-154" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Normalized Wages Over Time'</span>)</span>
<span id="cb4-155"><a href="#cb4-155" aria-hidden="true" tabindex="-1"></a>plt.xlim(<span class="dv">0</span>, <span class="dv">22</span>)</span>
<span id="cb4-156"><a href="#cb4-156" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb4-157"><a href="#cb4-157" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb4-158"><a href="#cb4-158" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb4-159"><a href="#cb4-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-160"><a href="#cb4-160" aria-hidden="true" tabindex="-1"></a><span class="co"># Last table</span></span>
<span id="cb4-161"><a href="#cb4-161" aria-hidden="true" tabindex="-1"></a>statistics_per_column <span class="op">=</span> {}</span>
<span id="cb4-162"><a href="#cb4-162" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> column <span class="kw">in</span> wagesYear_normalized.columns:</span>
<span id="cb4-163"><a href="#cb4-163" aria-hidden="true" tabindex="-1"></a>    min_value <span class="op">=</span> wagesYear_normalized[column].<span class="bu">min</span>()</span>
<span id="cb4-164"><a href="#cb4-164" aria-hidden="true" tabindex="-1"></a>    max_value <span class="op">=</span> wagesYear_normalized[column].<span class="bu">max</span>()</span>
<span id="cb4-165"><a href="#cb4-165" aria-hidden="true" tabindex="-1"></a>    yearly_change <span class="op">=</span> wagesYear_normalized[column].diff().mean()</span>
<span id="cb4-166"><a href="#cb4-166" aria-hidden="true" tabindex="-1"></a>    wage_total_percent_increase <span class="op">=</span> ((max_value <span class="op">-</span> min_value) <span class="op">/</span> min_value) <span class="op">*</span> <span class="dv">100</span> <span class="cf">if</span> min_value <span class="op">!=</span> <span class="dv">0</span> <span class="cf">else</span> <span class="dv">0</span></span>
<span id="cb4-167"><a href="#cb4-167" aria-hidden="true" tabindex="-1"></a>    yearly_change_percent <span class="op">=</span> ((yearly_change<span class="op">/</span>min_value) <span class="op">*</span> <span class="dv">100</span>)</span>
<span id="cb4-168"><a href="#cb4-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-169"><a href="#cb4-169" aria-hidden="true" tabindex="-1"></a>    statistics_per_column[column] <span class="op">=</span> {</span>
<span id="cb4-170"><a href="#cb4-170" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Min'</span>: <span class="bu">round</span>(min_value, <span class="dv">2</span>),</span>
<span id="cb4-171"><a href="#cb4-171" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Max'</span>: <span class="bu">round</span>(max_value, <span class="dv">2</span>),</span>
<span id="cb4-172"><a href="#cb4-172" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Average Change Over Year'</span>: <span class="bu">round</span>(yearly_change, <span class="dv">2</span>),</span>
<span id="cb4-173"><a href="#cb4-173" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Average Percent Change Over Year'</span>:<span class="ss">f"</span><span class="sc">{</span><span class="bu">round</span>(yearly_change_percent, <span class="dv">2</span>)<span class="sc">}</span><span class="ss">%"</span>,</span>
<span id="cb4-174"><a href="#cb4-174" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Total Percent Change'</span>: <span class="ss">f"</span><span class="sc">{</span><span class="bu">round</span>(wage_total_percent_increase, <span class="dv">2</span>)<span class="sc">}</span><span class="ss">%"</span></span>
<span id="cb4-175"><a href="#cb4-175" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-176"><a href="#cb4-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-177"><a href="#cb4-177" aria-hidden="true" tabindex="-1"></a>statistics_df <span class="op">=</span> pd.DataFrame.from_dict(statistics_per_column, orient<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb4-178"><a href="#cb4-178" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(statistics_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>